<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GrowSphere - Authentication</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    :root {
        --primary-color: #8A2BE2;
        --primary-dark: #0083b0;
        --gradient: linear-gradient(to right, var(--primary-color), var(--primary-dark));
        --bg-dark: #0f2027;
        --bg-medium: #203a43;
        --bg-light: #2c5364;
        --bg-gradient: linear-gradient(135deg, var(--bg-dark), var(--bg-medium), var(--bg-light));
        --text-light: #ffffff;
        --text-muted: #e0e0e0;
        --card-bg: rgba(255, 255, 255, 0.05);
        --card-border: rgba(255, 255, 255, 0.1);
    }
    body { font-family:'Poppins',sans-serif; background: var(--bg-gradient); display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0; padding:20px; color: var(--text-light); }
    .auth-container { width:100%; max-width:900px; height:550px; background: var(--card-bg); border-radius:20px; overflow:hidden; position:relative; backdrop-filter:blur(10px); border:1px solid var(--card-border); box-shadow:0 15px 35px rgba(0,0,0,0.15);}
    .sliding-panel { position:absolute; width:50%; height:100%; background:var(--gradient); transition: all 0.7s ease-in-out; z-index:10; display:flex; align-items:center; justify-content:center; text-align:center; padding:40px; box-sizing:border-box; border-radius:0 20px 20px 0;}
    .sliding-panel.register-active { transform: translateX(100%); border-radius:20px 0 0 20px;}
    .form-panel { position:absolute; width:50%; height:100%; padding:40px; box-sizing:border-box; display:flex; flex-direction:column; justify-content:center; transition: all 0.7s ease-in-out; background: var(--card-bg);}
    .login-panel { right:0; opacity:1;}
    .register-panel { left:0; opacity:0; transform:translateX(-20px);}
    .register-active .login-panel { opacity:0; transform:translateX(20px);}
    .register-active .register-panel { opacity:1; transform:translateX(0);}
    .toggle-button { background: rgba(255,255,255,0.2); border:2px solid var(--text-light); color:var(--text-light); padding:12px 30px; border-radius:50px; font-weight:600; cursor:pointer; transition: all 0.3s ease; backdrop-filter:blur(10px);}
    .toggle-button:hover { background: rgba(255,255,255,0.3); transform:scale(1.05);}
    .form-input { width:100%; padding:14px 20px; background: rgba(255,255,255,0.1); border:1px solid var(--card-border); border-radius:10px; margin-bottom:20px; color: var(--text-light);}
    .form-input::placeholder { color: var(--text-muted);}
    .form-input:focus { outline:none; background: rgba(255,255,255,0.15); box-shadow:0 0 0 2px var(--primary-color);}
    .submit-button { background: var(--gradient); color: var(--text-light); border:none; padding:14px 20px; border-radius:10px; font-weight:600; cursor:pointer; transition: all 0.3s ease; width:100%;}
    .submit-button:hover { transform: translateY(-2px); box-shadow:0 5px 15px rgba(138,43,226,0.4);}
    .social-buttons { display:flex; justify-content:center; gap:15px; margin-top:20px;}
    .social-button { width:50px; height:50px; border-radius:50%; background: rgba(255,255,255,0.1); display:flex; align-items:center; justify-content:center; cursor:pointer; transition: all 0.3s ease; border:1px solid var(--card-border);}
    .social-button:hover { transform: translateY(-3px); box-shadow:0 5px 15px rgba(0,0,0,0.2); background: var(--primary-color);}
    .divider { display:flex; align-items:center; margin:25px 0;}
    .divider-line { flex:1; height:1px; background: var(--card-border);}
    .divider-text { padding:0 15px; color: var(--text-muted); font-size:14px;}
    .toast { position:fixed; top:20px; right:20px; padding:15px 25px; background:var(--card-bg); border-left:4px solid #4caf50; border-radius:8px; box-shadow:0 5px 15px rgba(0,0,0,0.15); transform:translateX(100%); transition: transform 0.3s ease; z-index:1000; display:flex; align-items:center; color:var(--text-light); backdrop-filter:blur(10px); border:1px solid var(--card-border);}
    .toast.show { transform: translateX(0);}
    .toast.error { border-left-color:#f44336;}
    .toast i { margin-right:10px;}
    @media(max-width:768px){.auth-container{height:auto; max-width:400px;} .sliding-panel{display:none;} .form-panel{width:100%; position:relative; padding:30px;} .register-panel{transform:translateX(0); opacity:1; display:none;} .register-active .login-panel{display:none;} .register-active .register-panel{display:flex; transform:translateX(0);} .mobile-toggle{display:block; text-align:center; margin-top:20px; color:var(--primary-color); font-weight:600; cursor:pointer;}}
    .logo { position:absolute; top:20px; left:30px; font-weight:700; font-size:22px; color:var(--text-light); z-index:20;}
    .logo i { margin-right:8px;}
    .radial-bg { position:absolute; top:-50px; right:-50px; width:200px; height:200px; background:rgba(138,43,226,0.1); border-radius:50%;}
    .radial-bg-2 { position:absolute; bottom:-105px; left:-111px; width:300px; height:300px; background:rgba(0,131,176,0.1); border-radius:50%;}
    .password-container { position:relative;}
    .toggle-password { position:absolute; right:15px; top:50%; transform:translateY(-50%); cursor:pointer; color:var(--text-muted);}
    h2 { color: var(--text-light);}
</style>
</head>
<body>

<div class="auth-container" id="auth-container">
    <div class="logo"><i class="fas fa-seedling"></i>GrowSphere</div>

    <div class="sliding-panel" id="sliding-panel">
        <div>
            <h2 id="slider-title" class="text-3xl font-bold mb-4">Welcome to GrowSphere!</h2>
            <p id="slider-text" class="text-lg opacity-90 mb-6">Take Your Work to the Next Level with GrowSphere</p>
            <button class="toggle-button" id="toggle-button">Register</button>
        </div>
    </div>

    <div class="form-panel login-panel" id="login-panel">
        <div class="w-full">
            <h2 class="text-3xl font-bold mb-8 text-center">Login</h2>
            <form id="login-form">
                <input type="email" id="login-email" class="form-input" placeholder="Email" required>
                <div class="password-container">
                    <input type="password" id="login-password" class="form-input" placeholder="Password" required>
                    <span class="toggle-password" id="toggle-login-password"><i class="far fa-eye"></i></span>
                </div>
                <button type="submit" class="submit-button" id="login-submit-button">Login</button>
            </form>
            <div class="divider"><div class="divider-line"></div><div class="divider-text">or continue with</div><div class="divider-line"></div></div>
            <div class="social-buttons">
                <div class="social-button" id="btn-social-google-login"><i class="fab fa-google"></i></div>
                <div class="social-button" id="btn-social-github-login"><i class="fab fa-github"></i></div>
            </div>
            <div class="mobile-toggle" id="mobile-toggle-login">Don't have an account? <span style="color: var(--primary-color); font-weight:600;">Register</span></div>
        </div>
    </div>

    <div class="form-panel register-panel" id="register-panel">
        <div class="w-full">
            <h2 class="text-xl font-bold text-center">Create Account</h2>
            <form id="register-form">
                <input type="text" id="reg-username" class="form-input" placeholder="Full Name" required>
                <input type="email" id="reg-email" class="form-input" placeholder="Email" required>
                <div class="password-container">
                    <input type="password" id="reg-password" class="form-input" placeholder="Password" required>
                    <span class="toggle-password" id="toggle-register-password"><i class="far fa-eye"></i></span>
                </div>
                <button type="submit" class="submit-button" id="register-submit-button">Register</button>
            </form>
            <div class="divider"><div class="divider-line"></div><div class="divider-text">or continue with</div><div class="divider-line"></div></div>
            <div class="social-buttons">
                <div class="social-button" id="btn-social-google-register"><i class="fab fa-google"></i></div>
                <div class="social-button" id="btn-social-github-register"><i class="fab fa-github"></i></div>
            </div>
            <div class="mobile-toggle" id="mobile-toggle-register">Already have an account? <span style="color: var(--primary-color); font-weight:600;">Login</span></div>
        </div>
    </div>

    <div class="radial-bg"></div>
    <div class="radial-bg-2"></div>
</div>

<div class="toast" id="toast">
    <i class="fas fa-check-circle"></i>
    <span id="toast-message">Operation successful</span>
</div>

<script>
    // Replace these with your Supabase project values
    const SUPABASE_URL = 'https://txxaojmiuzqhsqupgmwp.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR4eGFvam1pdXpxaHNxdXBnbXdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4NzU0NjksImV4cCI6MjA3MjQ1MTQ2OX0.sWUkz6U5Ix-11VoZjVpFMPUmz7yRh5_ubyx8u8p-E8Q';
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // UI Elements
    const authContainer = document.getElementById('auth-container');
    const slidingPanel = document.getElementById('sliding-panel');
    const toggleButton = document.getElementById('toggle-button');
    const sliderTitle = document.getElementById('slider-title');
    const sliderText = document.getElementById('slider-text');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toast-message');
    const toastIcon = toast.querySelector('i');
    const mobileToggleLogin = document.getElementById('mobile-toggle-login');
    const mobileToggleRegister = document.getElementById('mobile-toggle-register');
    const toggleLoginPassword = document.getElementById('toggle-login-password');
    const toggleRegisterPassword = document.getElementById('toggle-register-password');
    
    let isLoginState = true;

    function toggleAuthState() {
        isLoginState = !isLoginState;
        if(isLoginState){
            authContainer.classList.remove('register-active');
            slidingPanel.classList.remove('register-active');
            toggleButton.textContent = 'Register';
            sliderTitle.textContent = 'Welcome to GrowSphere!';
            sliderText.textContent = 'Take Your Work to the Next Level with GrowSphere';
        } else {
            authContainer.classList.add('register-active');
            slidingPanel.classList.add('register-active');
            toggleButton.textContent = 'Login';
            sliderTitle.textContent = 'Hello, Friend!';
            sliderText.textContent = 'Enter your details and start your journey with us';
        }
    }
    toggleButton.addEventListener('click', toggleAuthState);
    mobileToggleLogin.addEventListener('click', toggleAuthState);
    mobileToggleRegister.addEventListener('click', toggleAuthState);

    function setupPasswordToggle(toggleElement, passwordFieldId){
        toggleElement.addEventListener('click',()=>{
            const passwordField=document.getElementById(passwordFieldId);
            const icon=toggleElement.querySelector('i');
            if(passwordField.type==='password'){passwordField.type='text'; icon.classList.replace('fa-eye','fa-eye-slash');}
            else {passwordField.type='password'; icon.classList.replace('fa-eye-slash','fa-eye');}
        });
    }
    setupPasswordToggle(toggleLoginPassword,'login-password');
    setupPasswordToggle(toggleRegisterPassword,'reg-password');

    function showToast(message,isError=false){
        toastMessage.textContent=message;
        if(isError){toast.className='toast error'; toastIcon.className='fas fa-exclamation-circle';}
        else {toast.className='toast'; toastIcon.className='fas fa-check-circle';}
        toast.classList.add('show');
        setTimeout(()=>{toast.classList.remove('show');},3000);
    }

    loginForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const email=document.getElementById('login-email').value;
        const password=document.getElementById('login-password').value;
        const submitButton=document.getElementById('login-submit-button');
        submitButton.disabled=true; submitButton.textContent='Logging in...';
        try{
            const { data,error } = await supabaseClient.auth.signInWithPassword({email,password});
            if(error){showToast(error.message,true); submitButton.disabled=false; submitButton.textContent='Login'; return;}
            showToast('Login successful! Redirecting...');
            setTimeout(()=>{window.location.href='index.html';},1500);
        } catch(err){showToast('Login error',true); submitButton.disabled=false; submitButton.textContent='Login';}
    });

    registerForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const email=document.getElementById('reg-email').value;
        const password=document.getElementById('reg-password').value;
        const fullName=document.getElementById('reg-username').value;
        const submitButton=document.getElementById('register-submit-button');
        if(password.length<6){showToast('Password must be at least 6 characters',true); return;}
        submitButton.disabled=true; submitButton.textContent='Creating account...';
        try{
            const { data,error } = await supabaseClient.auth.signUp({email,password,options:{data:{full_name:fullName}}});
            if(error){showToast(error.message,true); submitButton.disabled=false; submitButton.textContent='Register'; return;}
            showToast('Account created! Please check your email.');
            registerForm.reset();
            setTimeout(()=>{isLoginState=true; authContainer.classList.remove('register-active'); slidingPanel.classList.remove('register-active'); toggleButton.textContent='Register'; sliderTitle.textContent='Welcome to GrowSphere!'; sliderText.textContent='Take Your Work to the Next Level with GrowSphere'; submitButton.disabled=false; submitButton.textContent='Register';},2000);
        } catch(err){showToast('Registration error',true); submitButton.disabled=false; submitButton.textContent='Register';}
    });

    function setupSocialAuth(buttonId,provider){
        const button=document.getElementById(buttonId);
        if(button){button.addEventListener('click',async()=>{
            const { error } = await supabaseClient.auth.signInWithOAuth({provider});
            if(error) showToast('Auth error: '+error.message,true);
        });}
    }
    setupSocialAuth('btn-social-google-login','google');
    setupSocialAuth('btn-social-google-register','google');
    setupSocialAuth('btn-social-github-login','github');
    setupSocialAuth('btn-social-github-register','github');
</script>

</body>
</html>
